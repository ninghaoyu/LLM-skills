# AWS 架构设计说明书写作标准

**适用范围**: 步骤 4 Design Writer 生成的所有架构设计说明书
**核心原则**: 语言专业、表达丰满、逻辑严谨、不啰嗦冗余
**版本**: v1.0 (2026-01-18)

---

## 🎯 核心写作标准

### 5 个黄金标准

| 编号 | 标准 | 说明 | 检查方法 |
|-----|------|------|---------|
| **1** | **专业性** | 使用准确的 AWS 术语和技术指标 | 每个服务名称、指标都符合 AWS 官方表述 |
| **2** | **丰满性** | 每个决策都有充分的理由和分析 | 每章节 ≥ 200 字，包含背景、方案、权衡 |
| **3** | **量化性** | 用数据和指标说话，不用模糊词汇 | 成本/性能/规模都有具体数字 |
| **4** | **逻辑性** | 决策链条清晰（需求→方案→权衡→结论） | 每个决策都能追溯到具体需求 |
| **5** | **精简性** | 不啰嗦，不重复，每句话都有价值 | 删除"非常"、"很多"等空洞词汇 |

---

## 📝 详细写作规范

### 1️⃣ 语言专业性要求

#### ✅ 推荐写法（专业、丰满）

```markdown
本架构采用 Amazon RDS for MySQL Multi-AZ 部署方案，主要基于以下考量：

在数据库层面，我们选择了 RDS Multi-AZ 而非单实例部署，这一决策确保了系统在可用性和数据持久性方面达到生产级标准。Multi-AZ 配置通过在不同可用区维护同步副本，实现了自动故障转移能力，RTO 可控制在 1-2 分钟内，RPO 接近零，满足业务对 99.9% 可用性的明确要求。

从运维角度看，RDS 托管服务显著降低了运维复杂度。自动化补丁管理、备份策略和性能监控等特性，使团队能够将精力聚焦于业务优化而非基础设施维护。相较于自建 MySQL 集群，RDS 在初期可节省约 60% 的运维投入。

**权衡分析**：
- **优势**: Multi-AZ 提供了自动故障转移能力，无需人工干预；托管服务降低运维负担；成本可预测
- **劣势**: 相比 Aurora，性能上限较低（约为 Aurora 的 1/5）；存储扩展上限为 64 TiB
- **替代方案**: 若未来流量增长超过 10 倍或需要全球化部署，建议评估迁移至 Aurora Global Database

**成本考量**: 基于预估流量（10 万 DAU），db.r5.large Multi-AZ 实例月成本约 $450，相较于 Aurora 节省约 25%。
```

#### ❌ 避免写法（过于简单）

```markdown
使用 RDS Multi-AZ。

优点：
- 高可用
- 自动备份
- 易于管理

缺点：
- 性能不如 Aurora
```

---

### 2️⃣ 技术决策表达规范

#### 每个技术选择必须包含 4 个要素

| 要素 | 说明 | 示例 |
|-----|------|------|
| **决策内容** | 选择了什么服务/方案 | "采用 Application Load Balancer (ALB) 作为流量入口" |
| **决策理由 (Why)** | 为什么这样选择 | "ALB 提供 7 层路由能力，支持基于路径和主机名的规则，满足多服务路由需求" |
| **权衡分析 (Trade-off)** | 优势、劣势、替代方案 | "相比 NLB，ALB 牺牲了部分性能（约 10%），但换取了更灵活的路由能力" |
| **量化指标** | 成本、性能、规模等数据 | "预计月成本 $50，可处理 500 QPS，满足当前 2 倍冗余" |

#### 完整示例

```markdown
### 5.2 负载均衡层设计

**技术选择**: Application Load Balancer (ALB)

**决策理由**:
本架构选择 ALB 作为流量入口，主要基于以下技术考量：首先，ALB 提供的 7 层路由能力与当前业务需求高度契合，系统需要根据 URL 路径将请求分发至不同的后端服务（/api/* 路由至 API 服务，/static/* 路由至静态资源服务），这是 4 层负载均衡器（如 NLB）无法提供的；其次，ALB 原生集成了 WAF 和 AWS Shield，可直接应用安全防护策略，无需额外架设反向代理层。

从运维成熟度角度，ALB 提供了丰富的监控指标（请求数、延迟分布、健康检查状态等），这些数据可直接导入 CloudWatch 进行告警配置，运维团队已具备相关经验。

**权衡分析**:
- **性能考量**: ALB 的吞吐量理论上限约为 NLB 的 85-90%，在当前流量规模（峰值 500 QPS）下，性能差异可忽略不计。若未来流量增长至 5000+ QPS，需重新评估
- **成本对比**: ALB 按小时和 LCU（负载均衡器容量单位）计费，预估月成本约 $50-80，相比 NLB 高约 15%，但换取了路径路由和 WAF 集成能力
- **替代方案**: 若后续系统演化为纯 TCP/UDP 流量或对延迟极度敏感（< 5ms），可考虑迁移至 NLB；若需要全球化流量分发，可在 ALB 前端增加 CloudFront

**技术规格**:
- 部署模式: 跨 2 个可用区（AZ-A 和 AZ-B）
- 健康检查: HTTP /health 端点，间隔 30s，失败阈值 3 次
- 连接超时: 60s（考虑到部分 API 调用耗时较长）
- 预估性能: 可处理 1000 QPS（当前峰值的 2 倍冗余）
```

---

### 3️⃣ 避免过度啰嗦

#### ❌ 啰嗦写法

```markdown
在本项目的架构设计中，我们经过了非常详细和深入的分析与讨论，最终决定采用 Amazon RDS 作为我们的数据库解决方案。这个决定是在团队内部经过了多轮的技术评审会议，综合考虑了各种各样的因素，包括但不限于性能、成本、可维护性、扩展性等等多个维度之后做出的。我们认为 RDS 是一个非常好的选择，因为它提供了很多很多的优势，比如说它是托管服务，这意味着我们不需要自己去管理底层的基础设施...（继续重复）
```

#### ✅ 精简专业写法

```markdown
本架构选择 Amazon RDS for MySQL 作为数据库层，这一决策综合考虑了性能、成本和运维三个维度。RDS 托管服务消除了底层基础设施管理负担，使团队能专注于数据库优化和业务逻辑。Multi-AZ 部署确保了 99.9% 的可用性目标，自动故障转移机制将 RTO 控制在 2 分钟以内。成本方面，db.r5.large 实例月费用约 $450，相较于自建方案节省约 60% 的运维成本。
```

#### 关键原则

- ✅ 每句话都应承载实质信息
- ✅ 避免"非常"、"很多"等模糊词汇
- ✅ 用数据和事实说话
- ❌ 删除冗余的铺垫和重复

---

### 4️⃣ 假设的标注规范

#### 格式规范

**标准格式**: `【假设】说明内容`

#### 示例

```markdown
### 6.3 数据库容量规划

基于业务增长预测，我们制定了未来 12 个月的容量规划：

**当前基线**:
- 数据量: 200 GB
- 日增长: 500 MB
- 【假设】用户增长率保持在 15%/季度，与过去 6 个月趋势一致

**容量预测**:
- 6 个月后: 约 300 GB（50% 增长）
- 12 个月后: 约 450 GB（125% 增长）

**扩容触发点**: 当存储使用率达到 70%（即约 350 GB）时，触发自动扩容至 500 GB。【假设】RDS 的自动扩容不会影响业务（根据 AWS 文档，扩容过程对性能影响 < 5%）。
```

---

### 5️⃣ 分层次的信息呈现

#### 推荐结构

```markdown
### [章节标题] - 概括性标题

**核心决策**: 一句话总结

**背景与动机**:
[2-3 段] 为什么需要这个设计，解决什么问题

**技术方案**:
[详细设计] 具体如何实现，包含配置参数

**权衡分析**:
- 优势: ...
- 劣势: ...
- 替代方案: ...

**量化指标**:
- 性能: ...
- 成本: ...
- 规模: ...
```

#### ❌ 反例（平铺直叙）

```markdown
### 数据库设计

使用 RDS。选择 MySQL。开启 Multi-AZ。配置备份。设置监控。
```

---

### 6️⃣ 专业术语使用规范

#### ✅ 准确使用 AWS 术语

```markdown
正确: "Application Load Balancer (ALB)"
错误: "应用负载均衡器" 或 "ALB 负载均衡"

正确: "Amazon EC2 Auto Scaling Group"
错误: "EC2 自动扩展组" 或 "ASG"

正确: "Multi-AZ 部署"
错误: "多可用区部署" 或 "跨 AZ"

正确: "Amazon RDS for MySQL"
错误: "RDS MySQL" 或 "MySQL RDS"
```

#### ✅ 技术指标的表达

```markdown
正确: "RTO < 1h, RPO < 15min"
错误: "恢复时间很快" 或 "数据不会丢失"

正确: "P99 延迟 < 200ms"
错误: "延迟很低" 或 "响应速度快"

正确: "峰值 QPS 500，平均 QPS 150"
错误: "并发量很高" 或 "流量很大"

正确: "月成本约 $450（基于 us-east-1 定价）"
错误: "成本不高" 或 "价格合理"
```

---

### 7️⃣ 完整章节示例对比

#### ❌ 不合格示例（过于简单）

```markdown
## 5. 计算层设计

使用 EC2。

优点：灵活、可控。
缺点：需要运维。
```

#### ✅ 合格示例（专业丰满）

```markdown
## 5. 计算层设计

### 5.1 核心决策

本架构采用 **Amazon EC2 Auto Scaling Group** 作为应用计算层，配合 **Application Load Balancer** 实现高可用和弹性伸缩。

### 5.2 决策理由

**技术匹配度**：
当前应用基于 Spring Boot 框架，部署为传统 JAR 包，EC2 提供的虚拟机环境与现有部署流程无缝对接，迁移成本最低。相较于容器化方案（ECS/EKS），EC2 方案避免了应用改造和团队学习曲线，预计可缩短上线周期 2-3 个月。

**运维平衡**：
虽然 EC2 需要管理操作系统层（补丁、安全加固等），但团队已具备相关运维经验，且 AWS Systems Manager 提供的自动化补丁管理功能可覆盖 80% 的日常运维工作。这一权衡在当前阶段是合理的——待系统稳定运行 6-12 个月后，可评估容器化改造的 ROI。

### 5.3 技术规格

**实例配置**：
- 实例类型: **t3.medium** (2 vCPU, 4 GiB RAM)
- 选型依据: 基于压测数据，单实例可稳定处理 50 QPS，内存占用峰值约 2.5 GB，t3.medium 提供了约 60% 的性能冗余
- 【假设】应用优化后，单实例处理能力可提升至 80 QPS

**Auto Scaling 策略**：
- 最小实例数: 2（跨 2 个 AZ，确保单 AZ 故障时仍可服务）
- 最大实例数: 10（满足峰值流量 500 QPS 的需求，含 2 倍安全冗余）
- 扩容条件: CPU 使用率 > 70% 持续 5 分钟
- 缩容条件: CPU 使用率 < 30% 持续 15 分钟
- 冷却期: 扩容 300s，缩容 600s（避免频繁抖动）

**生命周期管理**：
- AMI 更新策略: 每季度更新基础镜像（包含安全补丁）
- 滚动更新: 使用蓝绿部署，确保零停机
- 健康检查: ALB 每 30s 检查 /health 端点

### 5.4 权衡分析

**与 ECS Fargate 对比**：
| 维度 | EC2 ASG | ECS Fargate | 决策 |
|------|---------|-------------|------|
| 迁移成本 | 低（无需改造） | 高（需容器化） | ✅ EC2 优势 |
| 运维负担 | 中（需管理 OS） | 低（无需管理 OS） | ⚠️ Fargate 优势 |
| 成本 | $200/月 | $280/月（同等配置） | ✅ EC2 优势 |
| 启动速度 | 60-90s | 30-45s | ⚠️ Fargate 优势 |

**综合评估**: 在当前阶段（MVP 上线后 6 个月内），EC2 方案在迁移成本和总成本方面优势明显。建议在系统稳定运行 6-12 个月后，基于实际运维数据重新评估容器化收益。

### 5.5 成本估算

**月度成本明细**（基于 us-east-1 区域定价）：
- t3.medium 按需实例: $30.37/实例/月
- 平均运行实例数: 3-4 个（基于流量波动）
- Auto Scaling（服务费用）: 免费
- **预估月成本**: $90-120

**优化建议**: 待系统稳定运行 3 个月后，可评估购买 1-2 个 Savings Plans（可节省约 30% 成本）。
```

---

## 📊 写作质量检查清单

### 章节级检查

使用以下清单检查每个章节的质量：

- [ ] **专业性**: 所有 AWS 服务名称使用官方术语
- [ ] **丰满性**: 章节长度 ≥ 200 字（简短章节除外）
- [ ] **完整性**: 包含决策内容、理由、权衡、指标
- [ ] **量化性**: 成本、性能、规模都有具体数字
- [ ] **逻辑性**: 决策链条清晰（需求→方案→权衡→结论）
- [ ] **精简性**: 无冗余词汇（"非常"、"很多"等）
- [ ] **准确性**: 技术细节和配置参数准确
- [ ] **可追溯性**: 每个决策都能追溯到具体需求或约束

---

### 文档级检查

使用以下清单检查整体文档质量：

- [ ] **结构完整**: 所有章节齐全，无遗漏
- [ ] **风格一致**: 全文语言风格统一
- [ ] **术语统一**: AWS 服务名称全文一致
- [ ] **数据准确**: 所有成本、性能数据基于实际或合理估算
- [ ] **假设明确**: 所有假设都用 `【假设】` 标注
- [ ] **交叉引用**: 章节间引用正确（如"见第 X 章"）
- [ ] **格式规范**: Markdown 格式正确，表格、代码块规范
- [ ] **可交付性**: 文档可直接交付客户或进入评审

---

## 🚫 常见错误与纠正

### 错误 1: 过度简化

**❌ 错误**:
```markdown
使用 EC2 因为灵活。
```

**✅ 正确**:
```markdown
本架构选择 Amazon EC2 Auto Scaling Group 作为计算层，主要基于以下考量：当前应用为 Spring Boot JAR 包，EC2 虚拟机环境与现有部署流程无缝对接，迁移成本最低。相较于容器化方案，EC2 避免了应用改造和团队学习曲线，预计可缩短上线周期 2-3 个月。
```

---

### 错误 2: 模糊表述

**❌ 错误**:
```markdown
系统性能很好，成本不高。
```

**✅ 正确**:
```markdown
基于压测数据，系统 P99 延迟为 180ms，满足业务要求（< 200ms）。月度成本约 $450，相较于自建方案节省约 60%。
```

---

### 错误 3: 缺少权衡

**❌ 错误**:
```markdown
选择 RDS Multi-AZ，提供高可用性。
```

**✅ 正确**:
```markdown
**权衡分析**:
- **优势**: Multi-AZ 自动故障转移，RTO < 2min；托管服务降低运维负担
- **劣势**: 相比 Aurora 性能上限较低（约 1/5）；成本比单 AZ 高约 100%
- **替代方案**: 若流量增长 10 倍，建议迁移至 Aurora Global Database
```

---

### 错误 4: 过度啰嗦

**❌ 错误**:
```markdown
我们经过了非常非常详细的分析和讨论，最终决定采用 RDS...（重复铺垫 200 字）
```

**✅ 正确**:
```markdown
本架构选择 Amazon RDS for MySQL，综合考虑了性能、成本和运维三个维度。（直接进入正题）
```

---

### 错误 5: 术语不规范

**❌ 错误**:
```markdown
使用 EC2 自动扩展组、RDS MySQL 数据库、ALB 负载均衡器。
```

**✅ 正确**:
```markdown
使用 Amazon EC2 Auto Scaling Group、Amazon RDS for MySQL、Application Load Balancer (ALB)。
```

---

## 📚 参考示例

完整的优秀示例请参考：
- [EXAMPLES.md](./EXAMPLES.md) - 4 个完整案例
- [templates/design_doc_template.md](./templates/design_doc_template.md) - 通用模板
- [templates/design_doc_template_ai_agentic.md](./templates/design_doc_template_ai_agentic.md) - AI Agentic 模板

---

## 📖 何时使用本文档

本文档主要在**步骤 4: Design Writer（文档生成）**时使用：

| 使用时机 | 使用目的 | 重要性 |
|---------|---------|--------|
| **生成前预习** | 了解质量标准（5-10 分钟） | ⭐⭐⭐ 重要 |
| **填充模板时** | 实时参考，确保每章节质量 | ⭐⭐⭐ 最重要 |
| **生成后质检** | 使用检查清单验证质量 | ⭐⭐⭐ 最重要 |
| **发现问题时** | 查错纠正 | ⭐⭐ 重要 |
| **步骤 5 审查** | 质量验证 | ⭐ 参考 |

**详细使用指南**: 参考 [WHEN_TO_USE_WRITING_STANDARDS.md](./WHEN_TO_USE_WRITING_STANDARDS.md)

---

## ✅ 快速自检

**生成文档后，使用以下 3 个问题快速自检**:

1. **专业性**: 每个 AWS 服务名称都准确吗？
2. **丰满性**: 每个技术选择都有 Why 和 Trade-off 吗？
3. **量化性**: 成本、性能、规模都有具体数字吗？

**如果 3 个问题都是"是"，说明文档达到了基本标准。**

---

**版本**: v1.0
**最后更新**: 2026-01-18
**适用于**: 所有架构设计说明书（11 章通用 + 14 章 AI Agentic）
